{"version":3,"sources":["app.module.css","components/Modal/modal.module.css","components/ImageGalleryItem/imageGalleryItem.module.css","components/ImageGallery/imageGallery.module.css","components/Button/button.module.css","components/Loader/loader.module.css","api.js","components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loader/Loader.js","App.js","index.js","components/Searchbar/searchbar.module.css"],"names":["module","exports","fetchData","query","page","keyApi","fetch","then","x","Promise","resolve","setTimeout","response","ok","json","data","hits","modalRoot","document","querySelector","Modal","handleKeydown","e","code","props","onClose","handleOverleyClick","currentTarget","target","window","addEventListener","this","removeEventListener","createPortal","className","styles","modal__overley","onClick","modal","src","largeImage","alt","Component","Searchbar","state","handleQueryChange","setState","value","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","toast","searchbar","searchForm","type","searchForm__button","searchForm__button_label","searchForm__input","autoComplete","autoFocus","placeholder","name","onChange","ImageGalleryItem","image","onImageClick","imageGalleryItem","webformatURL","tags","largeImageURL","imageGalleryItem__image","ImageGallery","imageGallery","map","id","Button","button","Loader","loader","color","height","width","timeout","App","showModal","isLoading","error","showMessage","handleFormSubmit","dataApi","scrollOnLoadButton","catch","finally","length","handleGalleryItem","fullImageUrl","toggleModal","prevState","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","console","log","showLoadMore","app","emptyGallery","message","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96644915.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__3kYyO\",\"emptyGallery\":\"app_emptyGallery__1eKuu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal__overley\":\"modal_modal__overley__1fF-3\",\"modal\":\"modal_modal__32gWq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"imageGalleryItem_imageGalleryItem__2CVYQ\",\"imageGalleryItem__image\":\"imageGalleryItem_imageGalleryItem__image__JNPrz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"imageGallery_imageGallery__3X8DL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"button_button__1OM9T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__1izL4\"};","export const fetchData = (query = '', page = 1) => {\r\n    const keyApi = '23047569-c77e6b9c2c44e7090fa2652c3';\r\n    return fetch(`https://pixabay.com/api/?q=${query}&page=${page}&key=${keyApi}&image_type=photo&orientation=horizontal&per_page=12 `)\r\n        .then(x => new Promise(resolve => setTimeout(() => resolve(x), 1000))) \r\n      .then(response => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }        \r\n      })\r\n      .then(data => data.hits);\r\n}\r\n\r\nexport { fetchData as default };","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport styles from './modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n\r\n    componentDidMount() {\r\n        // console.log('Modal componentDidMount');\r\n        window.addEventListener('keydown', this.handleKeydown)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // console.log('Modal componentWillUnmount');\r\n        window.removeEventListener('keydown', this.handleKeydown);\r\n    }\r\n\r\n    handleKeydown = e => {\r\n        if (e.code === 'Escape') {\r\n            // console.log('нажали Escape');\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    \r\n    handleOverleyClick = e => {\r\n        // console.log('currentTarget', e.currentTarget);\r\n        // console.log('target', e.target);\r\n        if (e.currentTarget === e.target) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n      \r\n    render() {\r\n        return createPortal(\r\n            <div className={styles.modal__overley} onClick={this.handleOverleyClick}>\r\n                <div className={styles.modal}>\r\n                    <img src={this.props.largeImage} alt='' /></div>\r\n        \r\n            </div>,\r\n            modalRoot);\r\n    }\r\n}\r\n\r\n\r\n\r\n ","import { Component } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport styles from '../Searchbar/searchbar.module.css'\r\n\r\n\r\n\r\nclass Searchbar extends Component {\r\n    state = {\r\n        query: '',\r\n    }\r\n\r\n    handleQueryChange = e => {\r\n        this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n    }\r\n    \r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        if (this.state.query.trim() === '') {\r\n            toast(\"Введите запрос\");\r\n            return;\r\n        }\r\n\r\n        this.props.onSubmit(this.state.query);\r\n        this.setState({ query: '' });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <header className={styles.searchbar}>\r\n                <form className={styles.searchForm} onSubmit={this.handleSubmit}>\r\n                    <button type=\"submit\" className={styles.searchForm__button} >\r\n                        <span className={styles.searchForm__button_label}>Search</span>\r\n                    </button>\r\n                    <input\r\n                        className={styles.searchForm__input}\r\n                        type=\"text\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Search images and photos\"\r\n                        name=\"query\"\r\n                        value={this.state.query}\r\n                        onChange={this.handleQueryChange}\r\n                    />\r\n                </form>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Searchbar;","import PropTypes from 'prop-types';\r\nimport styles from '../ImageGalleryItem/imageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image, onImageClick }) => {\r\n  \r\n  return (\r\n    <li className={styles.imageGalleryItem}>\r\n      <img\r\n        src={image.webformatURL}\r\n        alt={image.tags}\r\n        onClick={() => onImageClick(image.largeImageURL)}\r\n        className ={styles.imageGalleryItem__image}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  image: PropTypes.shape({\r\n    webformatURL: PropTypes.string.isRequired,\r\n    largeImageURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string,\r\n  }),\r\n  onImageClick: PropTypes.func.isRequired,\r\n};\r\n\r\n export default ImageGalleryItem;\r\n\r\n","import PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport styles from '../ImageGallery/imageGallery.module.css';\r\n\r\nconst ImageGallery = ({ data, onImageClick }) => (\r\n  <ul className={styles.imageGallery}>\r\n    {data.map(image => {\r\n      return (\r\n        <ImageGalleryItem\r\n          key={image.id}\r\n          image={image}\r\n          onImageClick={onImageClick}\r\n        />\r\n      );\r\n    })}\r\n  </ul>\r\n);\r\n\r\nImageGallery.propTypes = {\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n    }),\r\n  ),\r\n  onImageClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n\r\n","import PropTypes from 'prop-types';\r\nimport styles from '../Button/button.module.css';\r\n\r\nconst Button = ({ onClick }) => (\r\n  <div>\r\n    <button type=\"button\" className={styles.button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  </div>\r\n);\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;","import Spinner from \"react-loader-spinner\";\r\nimport styles from '../Loader/loader.module.css';\r\n\r\nconst Loader = () => (\r\n  <div className={styles.loader}>\r\n    <Spinner type=\"ThreeDots\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} />\r\n  </div>\r\n);\r\nexport default Loader;","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport styles from '../src/app.module.css';\nimport * as dataApi from './api';\nimport Modal from './components/Modal/Modal';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport Loader from './components/Loader/Loader';\n\n\nclass App extends Component {\n  state = {\n    data: [],\n    showModal: false,\n    isLoading: false,\n    query: '',\n    page: 1,\n    largeImage: '',\n    error: null,\n    showMessage: false\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.query !== this.state.query) {\n      this.fetchData();\n    }\n  }\n\n  handleFormSubmit = query => {\n    this.setState({\n      query,\n      page: 1,\n      data: []\n    });\n  }\n\n  fetchData = () => {\n    this.setState({ isLoading: true, showMessage: false })\n    const { query, page } = this.state;\n    dataApi\n      .fetchData(query, page)\n      .then(data => {\n        this.setState(state => ({\n          data: [...state.data, ...data],\n          page: state.page + 1,\n        }));\n        if (page !== 1) {\n          this.scrollOnLoadButton();\n        }\n        \n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        const { data, query } = this.state;\n        this.setState({ isLoading: false })\n        if (data.length === 0 && query !== '') {\n         this.setState({showMessage: true})\n        }\n      })\n  }\n\n  handleGalleryItem = fullImageUrl => {\n    this.setState({\n      largeImage: fullImageUrl,\n      showModal: true,\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(prevState => ({\n      showModal: !prevState.showModal,\n      largeImage: '',\n    }));\n  };\n\n  scrollOnLoadButton = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n\n  render() {\n    console.log(this.state.data);\n    const { showModal, data, largeImage, showMessage, isLoading } = this.state;\n    const {handleFormSubmit, handleGalleryItem, fetchData, toggleModal} = this;\n    const showLoadMore = data.length > 0 && data.length >= 12;\n    \n    return (\n      <div className={styles.app}>\n        <Searchbar onSubmit={handleFormSubmit} />\n        <ImageGallery onImageClick={handleGalleryItem} data={data} />\n        {isLoading && <Loader />}\n        {showMessage && <h2 className={styles.emptyGallery}>The gallery is empty! Try another query!</h2>}\n        {showLoadMore && <Button onClick={fetchData} />}\n        {showModal && <Modal onClose={toggleModal} largeImage={largeImage} />}\n        {this.error && <h2>{this.error.message}</h2>}\n        <ToastContainer autoClose={2000}/>\n    </div>  \n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"searchbar_searchbar__2NlTj\",\"searchForm\":\"searchbar_searchForm__23_vj\",\"searchForm__button\":\"searchbar_searchForm__button__Bl3-N\",\"searchForm__button_label\":\"searchbar_searchForm__button_label__3ymUI\",\"searchForm__input\":\"searchbar_searchForm__input__1GtBE\"};"],"sourceRoot":""}